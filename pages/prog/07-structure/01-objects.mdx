import { Callout } from 'nextra/components'

# Objekte in JavaScript

<Callout>
  **Dauer:** 45 Minuten

  - Bedeutung von Objekten in JavaScript 
  - Objekte sind Datenstrukturen (_key_ / _value_ Prinzip)

  **Ziel:** Daten mit Objekten strukturieren
</Callout>

Viele denken bei dem Begriff ‚ÄûObjekt‚Äú an 
objektorientierte Programmierung, wie sie z.B. in 
Java umgesetzt ist. In JavaScript gibt es zwar auch 
objektorientierte Programmierung (siehe sp√§ter), aber 
in JavaScript stellen Objekte an sich lediglich eine 
Datenstruktur dar, in der f√ºr benannte Eigenschaften 
unterschiedliche Werte zugeordnet werden. Mit 
Objektorientierung haben Objekte in JavaScript 
zun√§chst einmal nichts zu tun.

In JavaScript gibt es den Datentyp `object`, der 
Arrays und Objekte umfasst (und eigentlich auch 
Funktionen, aber siehe dazu `typeof`). Es gibt in 
JavaScript auch Klassen, mit denen (Objekt-)Instanzen 
erzeugt werden k√∂nnen (siehe [sp√§ter](/prog/07-structure/04-classes)).

## Objekte in JavaScript

In JavaScript ist ‚ÄûObjekt‚Äú eine Datenstruktur, 
die aus Eigenschaften mit eindeutigen Namen 
bestehen, denen bestimmte Werte zugeordnet sind
(Zahlen, Strings, Arrays, Objekte, Funktionen, usw.).

Objekte sind also Sammlungen von sogenannten 
Schl√ºssel/Wert-Paaren (_key / value pairs_). Dazu
ein erstes Beispiel in JavaScript-Syntax:

```js
let jane = {
  firstName: "Jane",
  lastName: "Smith",
  age: 32
};
```

Eine Objekt-Definition ist von geschweiften Klammern
umgeben (`{...}`) und enth√§lt Paare von Eigenschaften 
(_properties_, manchmal auch Schl√ºssel (_keys_) 
genannt) mit zugeh√∂rigen Werten (_values_).
`firstName`, `lastName` und `age` sind hier die Namen 
der Eigenschaften des Objekts. Den Eigenschaften
sind jeweils nach dem Doppelpunkt Werte 
zugeordnet (z.B. der Wert `"Jane"` f√ºr die 
Eigenschaft `firstName`). Die Eigenschaft-Wert-Paare
des Objekts werden durch Kommas voneinander
getrennt. 

Damit entsprechen Objekte in JavaScript den 
Dictionaries in Python, Structs in C, Hashes in 
Ruby, und st√ºckweise auch HashMaps in Java (oder
Records ab Java 15 ‚Äî die es auch in anderen 
Sprachen gibt). 

Die Eigenschaften entsprechen meistens gew√∂hnlichen
Bezeichnern oder Strings. Die Werte k√∂nnen von beliebigen Datentypen sein, so auch Arrays, 
Funktionen und wiederum Objekte:

```js
jane = {
  firstName: "Jane",
  lastName: "Smith",
  age: 32,
  hobbies: ["Music","Programming","Cycling"],
  fullName: function() {
    return this.firstName + " " + this.lastName;
  },
  address: {
    street: "Main Street",
    num: 123,
    city: "New York"
  }
};
```

**Erinnerung: Arrays**

Wenn der Umgang mit Arrays bekannt ist, dann ist 
der Schritt zu Objekten nicht sehr gro√ü ‚Äî 
tats√§chlich sind Arrays in JavaScript bereits 
Objekte. Die Positionen oder Indexe der Eintr√§ge 
eines Arrays k√∂nnten als ‚Äûdurchnummerierte 
Eigenschaften‚Äú aufgefasst werden: 

```js
let myList = [8, "Hallo", [4,5,6]];
// myList hat an der Position 0 den Wert 8:
// oder myList hat an der "Eigenschaft" 0 den Wert 8:
myList[0]; // 0 --> 8

// myList hat an der "Eigenschaft" 1 den Wert "Hallo":
myList[1]; // 1 --> "Hallo"

// myList soll an der "Eigenschaft" 3 das Array [40,50,60] erhalten:
myList[2] = [40,50,60]; // --> [8,"Hallo",[40,50,60]]
```

Der Umgang mit Arrays erfolgt in JavaScript durch 
eckige Klammern `[ ]`.

Bei der Deklaration steht die Position eines Eintrags 
bzw. Elements durch die Reihenfolge in der Aufz√§hlung 
fest.

Deklaration: 

```js
let l = [elem1, elem2, elem3, ‚Ä¶, elemN];
```

Zugriff auf ein Element bzw. Zuweisung eines 
Eintrags durch Angabe der Position:

lesender Zugriff auf einen Eintrag: `l[posX]`;

Zuweisung eines Eintrags: `l[posX] = newValue`;

Beispiel Array:

```js
let myList = [8, "Hallo", [4,5,6]];
// myList hat an der "Eigenschaft" 0 den Wert 8:
myList[0]; // 0 --> 8

// myList soll an der "Eigenschaft" 3 das Array [40,50,60] erhalten:
myList[2] = [40,50,60]; // --> [8,"Hallo",[40,50,60]]
```

Gleiches Beispiel als Objekt:

```js	
let myObject = {0: 8, 1: "Hallo", 2: [4,5,6]};
// myObject hat an der "Eigenschaft" 0 den Wert 8:
myObject['0']; // 0 --> 8  Achtung: String f√ºr Eigenschaftsname
	
// myObject soll an "Eigenschaft" 3 das Array [40,50,60] erhalten:
myObject['2'] = [40,50,60]; // --> {0: 8,1: "Hallo",2: [40,50,60]}
```

- &xrarr; Arrays werden in eckigen Klammern deklariert und Objekte in geschweiften. 
- &xrarr; Arrays haben numerische Indexe (Position eines Elements) und Objekte haben Eigenschaften mit Bezeichnern, die auch Strings sein k√∂nnen.

Der Zugriff auf die Werte bestimmter Eigenschaften
eines Objekts entspricht im Prinzip dem Zugriff
auf die Elemente eines Arrays.

Objekte bestehen also aus Aufz√§hlungen von 
Eigenschaften, gefolgt von einem Doppelpunkt und 
dem gew√ºnschten Wert f√ºr die Eigenschaft.

Dabei werden die Eigenschaften nat√ºrlich meistens 
nicht als Zahlen sondern durch beliebige Bezeichner
angegeben.

Auflistung der Eigenschaften und Werte bei einer
Objektdefinition erfolgt oft auf mehrere Zeilen 
verteilt (jeweils durch Komma getrennt): 

```js
let myObject = {
  prop1: value1,
  prop2: value2,
  // ... evtl. weitere props: values, <-- mit Komma am Ende!
  propN: valueN
};
```

### Zugriff auf Objekteigenschaften

Der Zugriff (lesend und schreibend) auf die
Eigenschaften eines Objekts erfolgt mit Strings, 
die den Namen der betroffenen Eigenschaft enthalten:

```js
let person = {firstName: 'Jane', lastName: 'Smith'};
person['firstName']; // --> 'Jane'
person['firstName'] = 'Jean';
```

Der Zugriff auf die Eigenschaften kann alternativ 
zu `obj['name']` auch mit der sogenannten 
‚ÄûPunktnotation‚Äú erfolgen durch `obj.name`:

```js
person.firstName; // --> 'Jean'
person.firstName = 'Jill';
```

`obj['name']` und `obj.name` sind gleichwertig 
und ergeben beide jeweils denselben Wert.

In der Punktnotation wird der Eigenschaftsname 
‚Äûdirekt hingeschrieben‚Äú und nicht als String 
angegeben. (Bei Arrays gibt es keine Punktnotation 
f√ºr den Elementzugriff). 

### Eigenschaften hinzuf√ºgen und entfernen

Das leere Objekt wird mit `{}` angegeben ‚Äî 
√§hnlich wie das leere Array mit `[]`. 

Objekte k√∂nnen zu sp√§teren Zeitpunkten um neue 
Eigenschaften/Werte erweitert werden (mit 
`obj['newProp'] = ...` oder `obj.newProp = ...`).

Eigenschaften k√∂nnen aus Objekten mit `delete` 
entfernt werden: 

```js
delete obj.newProp;
```

Zugriff auf nicht vorhandene Eigenschaften ergibt `undefined`.

Beispiele:

```js highlight=8-9
let obj = {}; // --> leeres Objekt
// Eigenschaften hinzuf√ºgen - egal ob mit [] oder .
obj['prop1'] = 'Hello!';
obj.prop2 = 123456;
	
// Eigenschaften entfernen
console.log(obj.prop2); // --> 123456
delete obj.prop2
console.log(obj.prop2); // --> undefined
```

```js
let jane = {
  firstName: "Jane",
  lastName: "Smith",
  age: 32,
  hobbies: ["Music","Programming","Cycling"],
  fullName: function() {
    return this.firstName + " " + this.lastName;
  },
  address: {
    street: "Main Street",
    num: 123,
    city: "New York"
  }
};
```

Zugriff auf Eigenschaften:

```js
jane['firstName']; // --> Zugriff mit []
jane.lastName; // --> Zugriff mit Punktnotation
jane.hobbies[0]; // --> Zugriff auf ein Element im Array
```

Objekte k√∂nnen auf ganz nat√ºrliche Weise auf Arrays 
und andere Objekte als Werte enthalten ‚Äî und auch 
Funktionen, da diese auch wie ‚Äûgew√∂hnliche‚Äú Werte 
aufgefasst werden k√∂nnen.

Hierbei hat die Funktion selbst keinen Namen (sie ist 
also anonym), siehe `function()` ‚Äî der Funktionsname 
wird sozusagen durch die Eigenschaft festgelegt (oben 
im Beispiel `fullName`). 

Funktionen als Werte von Objekteigenschaften k√∂nnen 
‚Äûganz normal‚Äú mit Punktnotation, dem Namen der 
Eigenschaft als Funktionsname und runden Klammern 
aufgerufen werden.

```js
jane.fullName(); // --> "Jane Smith"
```

Bei ‚Äûgeschachtelten‚Äú Objekten ist insbesondere die 
Punktnotation f√ºr den Zugriff auf die Eigenschaften 
viel einfacher als mit eckigen Klammen:

```js
jane['address']['city']; // --> "New York", umst√§ndlicher Zugriff
jane.address.city; // --> "New York", viel einfacher mit Punktnotation
```

<Callout type="info" emoji="üë®üèª‚Äçüíª">
Objekte in Wetter-App: Eingegebene Orte mit Temperatur als Objekt
in globalem Array speichern und mit Funktion namens `showLocations` 
ausgeben (Option 2 im Hauptmen√º).

Zuerst einfachem Zugriff auf Objekteigenschaften umsetzen, dann 
mit Destrukturierung und Object method shorthand als Tipp. Zu solchen 
Syntax-Tipps gibt es sp√§ter kurze Vorlesungen erg√§nzend zum Projekt.
</Callout>

## `this`

In Funktionen als Werte von Objekteigenschaften 
kann durch Voranstellen von this auf die Werte 
anderer Eigenschaften in dem Objekt zugegriffen 
werden. 

```js highlight=7
jane = {
  firstName: "Jane",
  lastName: "Smith",
  age: 32,
  hobbies: ["Music","Programming","Cycling"],
  fullName: function() {
    return this.firstName + " " + this.lastName;
  },
  address: {
    street: "Main Street",
    num: 123,
    city: "New York"
  }
};
```

Achtung: `this` hat in JavaScript grunds√§tzlich eine 
andere Bedeutung/Semantik als in Java und anderen 
Programmiersprachen!

Grobe Erkl√§rung: `this` in JavaScript bezieht sich 
auf den Kontext, in dem eine Funktion aufgerufen 
wird (oben ist dies das Objekt `jane`). 

## JSON

Das im Web sehr wichtige Datenaustauschformat JSON 
(**J**ava**S**cript**O**bject**N**otation) hat 
starke √Ñhnlichkeit zu JavaScript-Objekten.

F√ºr die Arbeit mit JSON verf√ºgt JavaScript √ºber eine eigene, fest integrierte JSON-API (application programming interface), Programmierschnittstelle).

Dies l√§sst sich leicht mit `JSON.stringify` zur 
Erstellung von JSON-Strings und umgekehrt durch 
`JSON.parse` f√ºr die Erzeugung von 
JavaScript-Objekten aus JSON-Strings nachvollziehen: 
	
```js
let testObject = {name: 'Foo', value: 32, list: [1,2,3]};
let jsonString = JSON.stringify(testObject);	
// --> "{"name":"Foo","value":32,"list":[1,2,3]}"	
let newObject = JSON.parse(jsonString);	
// --> {name: 'Foo', value: 32, list: [1,2,3]};
```
	
## Bemerkungen

**Eigenschaften mit Leerzeichen**

Eigenschaften k√∂nnen auch als Strings mit 
Anf√ºhrungszeichen deklariert werden.

Dies wird auf jeden Fall dann gebraucht, wenn eine 
Eigenschaft aus mehreren W√∂rtern besteht bzw. 
Leerzeichen enth√§lt: 

```js highlight=3
let anotherObject = {
  property1: 12345,
  'another property': 'whatever'
}
```

F√ºr solche Eigenschaften mit Leerzeichen **muss** 
der Zugriff durch eckige Klammern mit der Eigenschaft 
als String erfolgen. Punktnotation ist nicht m√∂glich: 

```js highlight=1
anotherObject['another property']; // --> 'whatever'
// anders geht es nicht, denn dies kann nicht funktionieren:
// anotherObject.another property   --> SyntaxError!
// anotherObject.'another property' --> SyntaxError!
```

**Objekte ‚Äûkopieren‚Äú**

Manchmal sollen die Eigenschaften eines Objekts in 
ein anderes Objekt kopiert werden. Dies kann durch 
`Object.assign` erreicht werden: 

```js
const target = { a: 1, b: 2 };	
const source = { b: 4, c: 5 };
	
const returnedTarget = Object.assign(target, source);

console.log(target);	
// expected output: Object { a: 1, b: 4, c: 5 }

console.log(returnedTarget);	
// expected output: Object { a: 1, b: 4, c: 5 }
```

(Dies erinnert an die Methode `clone()` in Java.) 

Quelle des Beispiels:
https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign 

<Callout type="info">
**Vertiefendes Material**

- [Objects bei javascript.info](https://javascript.info/object-basics)
- [Objects im MDN](https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Objects/Basics)
</Callout>