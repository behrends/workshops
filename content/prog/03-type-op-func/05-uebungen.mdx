import { Callout } from 'nextra/components'

# √úbungen zu Funktionen

<Callout>
  **Dauer:** 45-60 Minuten \
  (ggf. Besprechung beim n√§chsten Termin)

  **Ziel:** Funktionen anwenden und den Trinkgeldrechner refaktorieren
</Callout>

In diesen √úbungen wenden wir das Konzept der Funktionen an.
Dabei bauen wir auf dem Trinkgeldrechner aus der vorherigen
√úbung auf und verbessern die Struktur durch Funktionen.

<Callout type="info">
**Was bedeutet ‚Äûrefaktorieren"?**

Refaktorieren (englisch: _refactoring_) bedeutet, bestehenden Code
umzustrukturieren und zu verbessern, **ohne sein Verhalten zu √§ndern**.

Das Programm macht danach also genau das Gleiche wie vorher &mdash;
aber der Code ist besser organisiert, lesbarer und einfacher zu warten.

Typische Refaktorierungen sind:
- Code in Funktionen auslagern
- Variablen besser benennen
- Doppelten Code zusammenfassen
</Callout>

## Aufgabe 1: Einfache Funktion (Einstieg)

Schreibe eine Funktion `calculateTip`, die den Trinkgeldbetrag berechnet:

- **Parameter:** `bill` (Rechnungsbetrag), `percent` (Trinkgeld-Prozentsatz)
- **R√ºckgabewert:** Der berechnete Trinkgeldbetrag

```js
function calculateTip(bill, percent) {
  // Berechnung hier erg√§nzen
}

// Test:
let tip = calculateTip(100, 15);
console.log(tip); // Ausgabe: 15
```

## Aufgabe 2: Funktion mit Ausgabe (Einstieg)

Schreibe eine Funktion `displayResult`, die das Ergebnis formatiert ausgibt:

- **Parameter:** `bill`, `tip`, `total`
- **R√ºckgabewert:** keiner (nur Ausgabe)

```js
function displayResult(bill, tip, total) {
  // Ausgabe hier erg√§nzen
}

// Test:
displayResult(80, 12, 92);
// Erwartete Ausgabe:
// Rechnungsbetrag: 80.00
// Trinkgeld:       12.00
// Gesamtbetrag:    92.00
```

<Callout type="info">
**Tipp:** F√ºr die Formatierung auf zwei Nachkommastellen
kann `toFixed(2)` verwendet werden.
</Callout>

## Aufgabe 3: Validierungsfunktion (√úbung)

Schreibe eine Funktion `isValidInput`, die pr√ºft, ob die Eingaben g√ºltig sind:

- **Parameter:** `bill`, `percent`
- **R√ºckgabewert:** `true` wenn g√ºltig, `false` wenn ung√ºltig

Regeln:
- `bill` muss gr√∂√üer als 0 sein
- `percent` muss zwischen 0 und 100 liegen

```js
function isValidInput(bill, percent) {
  // Validierung hier erg√§nzen
}

// Tests:
console.log(isValidInput(50, 15));   // true
console.log(isValidInput(-10, 15));  // false
console.log(isValidInput(50, 150));  // false
```

## Aufgabe 4: Bewertungsfunktion (√úbung)

Schreibe eine Funktion `getRating`, die basierend auf dem
Prozentsatz eine Bewertung zur√ºckgibt:

- **Parameter:** `percent`
- **R√ºckgabewert:** `"Sparsam"`, `"Normal"` oder `"Gro√üz√ºgig"`

Regeln:
- Unter 10%: "Sparsam"
- 10% bis unter 15%: "Normal"
- Ab 15%: "Gro√üz√ºgig"

```js
function getRating(percent) {
  // Bewertung hier erg√§nzen (mit Bedingungsoperator)
}

// Tests:
console.log(getRating(5));   // "Sparsam"
console.log(getRating(12));  // "Normal"
console.log(getRating(20));  // "Gro√üz√ºgig"
```

## Aufgabe 5: Aufteilungsfunktion (√úbung)

Schreibe eine Funktion `calculatePerPerson`, die den Betrag
pro Person berechnet:

- **Parameter:** `total`, `persons`
- **R√ºckgabewert:** Betrag pro Person

```js
function calculatePerPerson(total, persons) {
  // Berechnung hier erg√§nzen
}

// Test:
let perPerson = calculatePerPerson(120, 4);
console.log(perPerson); // Ausgabe: 30
```

## Aufgabe 6: Trinkgeldrechner refaktorieren (Vertiefung)

Kombiniere alle Funktionen aus den vorherigen Aufgaben zu
einem vollst√§ndigen Trinkgeldrechner. Das Hauptprogramm
sollte √ºbersichtlich und gut lesbar sein.

**Struktur:**

```js
import { questionFloat, questionInt } from 'readline-sync';

// === Funktionen ===

function calculateTip(bill, percent) {
  // ...
}

function calculatePerPerson(total, persons) {
  // ...
}

function isValidInput(bill, percent, persons) {
  // ...
}

function getRating(percent) {
  // ...
}

function displayResult(bill, tip, total, perPerson, rating) {
  // ...
}

// === Hauptprogramm ===

console.log("=== Trinkgeldrechner ===");

let bill = questionFloat("Rechnungsbetrag: ");
let percent = questionFloat("Trinkgeld (%): ");
let persons = questionInt("Anzahl Personen: ");

// Hier die Funktionen aufrufen und Ergebnisse ausgeben
```

<Callout type="info">
**Vorteile dieser Struktur:**

- Jede Funktion hat eine klar definierte Aufgabe
- Das Hauptprogramm ist kurz und √ºbersichtlich
- Funktionen k√∂nnen einzeln getestet werden
- √Ñnderungen sind einfacher (z.B. andere Bewertungsgrenzen)
</Callout>

## Aufgabe 7: Erweiterung (Vertiefung)

Erweitere den Trinkgeldrechner um eine neue Funktion `suggestTip`,
die basierend auf einem "Service-Level" einen Prozentsatz vorschl√§gt:

- **Parameter:** `serviceLevel` (1 = schlecht, 2 = okay, 3 = gut)
- **R√ºckgabewert:** Vorgeschlagener Prozentsatz (5%, 10%, 15%)

```js
function suggestTip(serviceLevel) {
  // Vorschlag hier erg√§nzen
}

// Tests:
console.log(suggestTip(1)); // 5
console.log(suggestTip(2)); // 10
console.log(suggestTip(3)); // 15
```

Integriere diese Funktion in den Trinkgeldrechner, sodass
der Benutzer zwischen manuellem Prozentsatz und Service-Bewertung
w√§hlen kann.

## Zusammenfassung

<Callout emoji="üóíÔ∏è">
In diesen √úbungen haben wir gelernt:

- **Funktionen deklarieren** mit `function name(params) { ... }`
- **Parameter** f√ºr Eingabewerte verwenden
- **R√ºckgabewerte** mit `return` zur√ºckgeben
- **Code strukturieren** durch Aufteilung in kleine Funktionen
- **Wiederverwendbarkeit** durch allgemeine Funktionen erreichen
</Callout>

<Callout type="warning">
Aufgaben und L√∂sungen siehe `03-Funktionen` im Repository `exercises`.
</Callout>
