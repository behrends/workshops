import { Callout } from 'nextra/components'

# Mit Git arbeiten



Nun werden wir gemeinsam die wichtigsten Schritte f√ºr die 
t√§gliche Arbeit im Team mit Git und GitHub durchgehen.

Folgende Git-Befehle werden wir kennenlernen:

- `git status` (Status der Dateien anzeigen)
- `git diff` (Unterschiede anzeigen)
- `git add` (Dateien hinzuf√ºgen)
- `git commit` (√Ñnderungen best√§tigen)
- `git pull` (√Ñnderungen vom Server holen)
- `git push` (√Ñnderungen auf den Server laden)
- `git log` (√Ñnderungshistorie anzeigen)

&rarr; Wir werden diese Befehle sowohl im Terminal als auch 
mit den Git-Tools in VS Code ausf√ºhren.

<Callout type="info">
N√ºtzliche Links zu Git:

- Git Cheat Sheet: https://git-scm.com/cheat-sheet (dort auch als PDF) 
- Offizielles Git-Buch (deutsche √úbersetzung, komplett online): https://git-scm.com/book/de/v2

F√ºr Neugierige mit mehr Git-Erfahrung:

- Lazygit, ein Terminal-UI f√ºr Git: https://github.com/jesseduffield/lazygit
- Jujutsu, ein neues VCS basierend auf Git: https://www.jj-vcs.dev
</Callout>

## Lokale √Ñnderungen an Dateien

Das lokale Repository auf dem eigenen Rechner ist eine 
Kopie des Repository auf GitHub. Hier k√∂nnen wir lokale √Ñnderungen
an Dateien vornehmen, d.h. andere Teammitglieder sehen diese 
√Ñnderungen noch nicht. √Ñnderungen k√∂nnen sein:

- Hinzuf√ºgen neuer Dateien
- √Ñndern bestehender Dateien
- L√∂schen von Dateien

In unserem Repository haben wir bereits ein paar Dateien:

- `README.md` (Text-Datei mit Informationen zum Projekt in [Markdown](https://docs.github.com/de/github/writing-on-github/basic-writing-and-formatting-syntax))
- `.gitignore` (Liste von Dateien, die von Git ignoriert werden sollen, z. B. alles in `node_modules`)
- Vielleicht auch die `LICENSE`-Datei (Lizenz f√ºr das Projekt)

## Repository-Zustand mit `git status` √ºberpr√ºfen

<Callout type="error" emoji="üö®">
Wenn Sie die folgenden Schritte mitmachen m√∂chten,
dann sollte dies pro Team nur eine Person tun, um
m√∂gliche Konflikte in den √Ñnderungen zun√§chst zu vermeiden.

Vielleicht ist es sinnvoll, dass die Person im Team,
die sich noch nicht so gut mit Git auskennt, die
Schritte durchf√ºhrt, um die Abl√§ufe besser zu verstehen.

Achten Sie auch darauf, ob die √Ñnderungen im aktuellen
Stand Ihres Projekts sinnvoll sind und ob Sie evtl. andere
Dateien bzw. √Ñnderungen vornehmen m√∂chten. Es ist auch 
m√∂glich, die √Ñnderungen sp√§ter wieder r√ºckg√§ngig zu machen.
</Callout>

Wir erstellen in VS Code eine neue Datei `main.js` im 
Projektordner und f√ºgen folgenden Code ein (gerne nach eigenen
Vorstellungen anpassen):

```js
console.log("Willkommen im Programm!");
```

Dadurch haben wir eine neue Datei erstellt, die noch
nicht im Git-Repository erfasst ist. Dies ist durch
den Status `untracked` gekennzeichnet und wird durch 
gr√ºne F√§rbung des Dateinamens mit Zusatz `U` im 
Explorer von VS Code dargestellt (es gibt auch `D` in 
rot f√ºr `deleted` und `M` in gelb f√ºr `modified`). 

Wir k√∂nnen den Status der Dateien in VS Code im Bereich 
`Source Control` √ºberpr√ºfen. Au√üerdem gibt es daf√ºr 
ein eigenes Terminal-Kommando:

```bash
git status
```

<Callout>
Mit `git status` im Terminal oder den Git-Tools in VS Code 
k√∂nnen wir den Status der Dateien jederzeit √ºberpr√ºfen und 
sehen, welche Dateien neu sind, ge√§ndert wurden oder 
gel√∂scht wurden.
</Callout>

## √Ñnderungen mit `git diff` anzeigen

W√§hrend uns `git status` den Status der Dateien anzeigt,
k√∂nnen wir mit `git diff` die genauen √Ñnderungen in den
Dateien anzeigen. Dazu geben wir im Terminal folgenden
Befehl ein:

```bash
git diff
```

Dies zeigt uns die Unterschiede der aktuellen √Ñnderungen
im lokalen Repository an. Es ist auch m√∂glich, nur die
√Ñnderungen einer bestimmten Datei anzuzeigen:

```bash
git diff main.js
```

Da `main.js` eine neue Datei ist, wird der gesamte Inhalt
der Datei angezeigt. Bei ge√§nderten Dateien werden nur die
ge√§nderten Zeilen angezeigt.

In VS Code k√∂nnen wir die √Ñnderungen auch direkt im `Source 
Control`-Bereich sehen, indem wir dort eine Datei ausw√§hlen und uns 
die √Ñnderungen im Editor-Bereich mit visuellen Hervorhebungen 
anzeigen lassen.

## √Ñnderungen mit `git add` hinzuf√ºgen

Wenn wir unsere √Ñnderung best√§tigen wollen, m√ºssen wir
in Git in zwei Schritten vorgehen:

1. √Ñnderungen hinzuf√ºgen (`git add`)
2. √Ñnderungen best√§tigen (`git commit`)

Zun√§chst m√ºssen wir die Dateien hinzuf√ºgen, die wir 
f√ºr die √Ñnderung best√§tigen wollen. Dazu verwenden wir den
Befehl `git add`. Wir k√∂nnen einzelne Dateien oder 
auch alle ge√§nderten Dateien hinzuf√ºgen. Im Terminal geben 
wir folgenden Befehl f√ºr das Hinzuf√ºgen von `main.js` ein:

```bash
git add main.js
```

Damit wird die Datei `main.js` f√ºr die n√§chste best√§tigte √Ñnderung 
(`commit`) vorgemerkt. Wir k√∂nnen mit der Option `-A` auch alle 
ge√§nderten Dateien hinzuf√ºgen:

```bash
git add -A
```

Damit haben wir die Datei `main.js` f√ºr die n√§chste
√Ñnderung vorgemerkt. Der Status der Dateien hat sich
nun ge√§ndert und wir k√∂nnen dies mit `git status`
√ºberpr√ºfen.

Auch in VS Code l√§sst sich dies im `Source Control`-Bereich 
nachvollziehen. Dort sehen wir die vorgemerkten Dateien
unter `Staged Changes` und k√∂nnen sie auch einzeln oder
alle auf einmal mit `+` hinzuf√ºgen.

<Callout>
Auch wenn wir sp√§ter vielleicht haupts√§chlich die 
Git-Tools in VS Code verwenden, ist es wichtig, die
Grundlagen der Git-Befehle zu kennen, um zu verstehen,
was im Hintergrund passiert. 
</Callout>

## √Ñnderungen mit `git commit` best√§tigen

<Callout>
Erinnerung: Bevor wir √Ñnderungen best√§tigen, sollten wir
sicherstellen, dass wir die √Ñnderungen mit `git status`
und `git diff` √ºberpr√ºft haben und die gew√ºnschten Dateien 
mit `git add` hinzugef√ºgt haben.
</Callout>

Nachdem wir die √Ñnderungen hinzugef√ºgt haben, k√∂nnen wir
sie mit `git commit` best√§tigen. Dazu geben wir im Terminal
folgenden Befehl ein:

```bash 
git commit -m 'main.js hinzugef√ºgt'
```

Mit `-m` geben wir eine Nachricht an, die die √Ñnderung
beschreibt. Diese Nachricht ist wichtig, um sp√§ter 
nachvollziehen zu k√∂nnen, was in einem `commit` ge√§ndert wurde.

Nach dem Best√§tigen der √Ñnderung mit `git commit` ist
die √Ñnderung im **lokalen** Repository festgehalten. Wir
k√∂nnen dies mit `git status` √ºberpr√ºfen und sehen, dass
es keine √Ñnderungen mehr gibt. Ebenso sind in VS Code
die vorgemerkten Dateien aus dem `Source Control`-Bereich
verschwunden.

## √Ñnderungen in VS Code best√§tigen

Zur Veranschaulichung der Git-Tools in VS Code erweitern wir  
das Projekt zun√§chst mit `package.json`. Dazu f√ºhren wir im 
Terminal folgenden Befehl aus:

```bash
npm init 
```

Im Dialog geben wir die gew√ºnschten Informationen ein, die
meisten k√∂nnen wir mit Enter best√§tigen. Am Ende wird eine
`package.json`-Datei erstellt. 

Wir spielen diese √Ñnderung nun komplett in VS Code durch:

- Status im `Source Control`-Bereich √ºberpr√ºfen
- Datei `package.json` hinzuf√ºgen (mit `+`-Zeichen)
- Datei `package.json` ist nun in `Staged Changes`
- Commit-Nachricht eingeben (z. B. _package.json hinzugef√ºgt_) 
- `Commit`-Button klicken 

Au√üerdem f√ºgen wir noch die Hilfsbibliothek `readline-sync` hinzu:

```bash
npm install readline-sync
```

In den Git-Tools von VS Code sehen wir nun, dass `package.json`
ge√§ndert wurde. Au√üerdem wurde die neue Datei `package-lock.json`
erstellt. `.gitignore` enth√§lt bereits den Eintrag `node_modules`, 
daher taucht `node_modules` nicht in den √Ñnderungen auf.

Wir f√ºgen die Dateien hinzu und best√§tigen die √Ñnderungen mit
einer Commit-Nachricht (z. B. _readline-sync hinzugef√ºgt_).

## √Ñnderungen werden in `commits` festgehalten

In Git ist ein `commit` eine Best√§tigung von √Ñnderungen 
an beliebig vielen Dateien. Dies k√∂nnen neue Dateien sein,
ge√§nderte Dateien oder gel√∂schte Dateien. Ein `commit` wirkt
sich auf die gesamte Arbeitskopie aus, d.h. alle Dateien
werden in den Zustand des `commit` zur√ºckgesetzt.

### Staging Area

Mit `git add` f√ºgen wir Dateien zur `Staging Area` hinzu 
(_stage_ = B√ºhne). Die `Staging Area` ist ein Zwischenspeicher
f√ºr √Ñnderungen, die wir best√§tigen wollen. Mit `git commit`
werden die √Ñnderungen aus der `Staging Area` in das lokale
Repository √ºbernommen. Durch die `Staging Area` k√∂nnen wir
√Ñnderungen in mehreren Schritten best√§tigen, indem wir f√ºr 
eine bestimmte √Ñnderung nur die betroffenen Dateien hinzuf√ºgen und
dir irrelevanten Dateien auslassen. 

<br/>

<mark>Die `Staging Area` ist ein wichtiges Konzept in Git.</mark>

```mermaid
flowchart TD
    subgraph Arbeitsverzeichnis
        A1[Datei: main.js]
        A2[Datei: package.json]
    end

    subgraph Staging Area
        B1[Datei: main.js]
        B2[Datei: package.json]
    end

    subgraph Lokales Repository
        C[Commit: Update main.js & package.json]
    end

    A1 -->|git add main.js| B1
    A2 -->|git add package.json| B2
    B1 & B2 -->|git commit -m 'main.js und package.json hinzugef√ºgt'| C
```


## √Ñnderungen auf GitHub f√ºr das Team bereitstellen

Sobald wir √Ñnderungen im lokalen Repository best√§tigt haben,
k√∂nnen wir sie auf GitHub bereitstellen. Dazu verwenden wir
den Befehl `git push`. Dieser l√§dt die √Ñnderungen auf den
GitHub-Server hoch, wo sie f√ºr andere Teammitglieder sichtbar
werden.

```bash
git push
```

Nach dem Ausf√ºhren von `git push` sind die √Ñnderungen auf
GitHub sichtbar. Wir k√∂nnen dies √ºberpr√ºfen, indem wir auf
die GitHub-Webseite gehen und uns das Repository ansehen.

Auch in VS Code gibt es die M√∂glichkeit, √Ñnderungen direkt
zu _pushen_.
