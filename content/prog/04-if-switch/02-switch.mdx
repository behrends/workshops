import { Callout } from 'nextra/components'

# Fallunterscheidungen (switch)

<Callout>
  **Dauer:** 30 Minuten

  - `switch` als Alternative zu `if/else if/else`

  **Ziel:** Es gibt oft mehrere Konzepte der Programmierung, die f√ºr eine L√∂sung geeignet sind
</Callout>

Es gibt Situationen, in denen mehrere F√§lle unterschieden werden 
m√ºssen. Mit `if ‚Ä¶ else if ‚Ä¶ else ‚Ä¶` kann dies recht 
un√ºbersichtlich werden:

```js
import { question } from "readline-sync";

let a = 13, b = 4;	
let op = question("Welche Rechenoperation?");
if(op === "+") {
  console.log(a + b);
} else if(op === "-") {
  console.log(a - b);
} else if(op === "*") {
  console.log(a * b);
} else if(op === "/") {
  console.log(a / b);
} else if(op === "%") {
  console.log(a % b);
} else {
  console.log(`Operator ${op} nicht unterst√ºtzt`);
}
```

In solchen Situationen stellt `switch` gelegentlich eine besser 
lesbare Alternative dar:

```javascript
import { question } from "readline-sync";

let a = 13, b = 4;	
let op = question("Welche Rechenoperation?");
switch(op) {
  case "+":
    console.log(a + b);
    break;
  case "-":
    console.log(a - b);
    break;
  case "*":
    console.log(a * b);
    break;
  case "/":
    console.log(a / b);
    break;
  case "%":
    console.log(a % b);
    break;
  default:
    console.log(`Operator ${op} nicht unterst√ºtzt`);
}
```

```mermaid
flowchart TD
  A[Start] --> B["op = question('Welche Rechenoperation?')"]
  B --> C{{op}}
  C -->|\+| D["console.log(a + b)"]
  D --> E[End]
  C -->|\-| F["console.log(a - b)"]
  F --> E
  C -->|\*| G["console.log(a * b)"]
  G --> E
  C -->|/| H["console.log(a / b)"]
  H --> E
  C -->|%| I["console.log(a % b)"]
  I --> E
  C -->|default| J["console.log('Operator ' + op + ' nicht unterst√ºtzt')"]
  J --> E
  linkStyle default font-size:24px
```


Der Code ist insgesamt etwa gleich lang und ergibt hier in 
beiden Beispielen dasselbe Ergebnis. Dennoch finden manche,
dass `switch` oft klarer strukturiert ist als verschachtelte
`if/else if/else`-Ausdr√ºcke. Dadurch entsteht durch `switch`
gelegentlich Code, der einfacher zu lesen ist als ein Ansatz
mit `if/else if/else`. 

<Callout type="info">
**Bemerkungen**

Grunds√§tzlich lassen sich alle Verzweigungen und 
Fallunterscheidungen mit `if/else if/else` ausdr√ºcken. 
`switch` stellt lediglich eine Alternative dar, die in
manchen Situationen n√ºtzlich sein kann.

`switch` gibt es in einigen Programmiersprachen.

Mit `switch` sehen wir ein Beispiel daf√ºr, dass es in
Programmiersprachen oftmals mehrere M√∂glichkeiten gibt,
etwas in Code auszudr√ºcken.
</Callout>


Die Syntax eines `switch`-Ausdrucks sieht im Allgemeinen so aus:

```javascript
switch( ...Auswahlausdruck... ) {
  case Auswahlkonstante:
    // Anweisung
    // ‚ãÆ
    // Anweisung
    break;
  case Auswahlkonstante:
    // Anweisung
    // ‚ãÆ
    // Anweisung
    break;
  // ‚ãÆ
  default:
    // Anweisung
    // ‚ãÆ
    // Anweisung
    break;
}
```

Der `Auswahlausdruck` zu Beginn des `switch` wird oft durch 
den Inhalt einer Variablen vorgegeben.

F√ºr die `Auswahlkonstanten` in den `case`-Teilen 
wird dann ein konkreter Wert f√ºr die im `switch`
angegebene Variable abgefragt. Hier wird ein Test 
auf Gleichheit durchgef√ºhrt, allerdings ohne den 
Vergleich hinzuschreiben.

Der `Auswahlausdruck` wird ausgewertet, sein Wert 
wird unter den vorhandenen `Auswahlkonstanten`
gesucht. Die Anweisungen unmittelbar nach der 
entsprechenden Auswahlkonstante werden bis zum 
n√§chsten `break` ausgef√ºhrt.

Die Anweisungen werden fortlaufend ausgewertet 
(‚Äû_fall-through_")!
    
Daher Vorsicht: `break` nicht vergessen!

Es k√∂nnen ein oder mehrere `case`-Bl√∂cke angegeben 
werden. Es kann h√∂chstens einen `default` Block 
geben (analog zu else in Verzweigungen), der aktiv
wird, wenn keine der `Auswahlkonstanten` dem
`Auswahlausdruck` gleicht.

Ein `switch` funktioniert nur in bestimmten 
Situationen, n√§mlich wenn f√ºr einen Ausdruck bzw.
eine Variable nur die Gleichheit √ºberpr√ºft wird.

<Callout type="info">
Wir zeigen Beispiele, damit `switch`
in verschiedenen Situationen nachvollzogen werden 
kann (`case` zusammenfassen, `break`, 
‚Äû_fall-through_‚Äú, usw.).
</Callout>

<Callout type="info" emoji="üë®üèª‚Äçüíª">
In die Wetter-App k√∂nnten wir ein Hauptmen√º einbauen:

- √úberschrift und Men√ºpunkte (1: Ort eingeben, 2: Alle Orte anzeigen, 3: Beenden) mit Template-String
- `switch` f√ºr die Auswahl der Men√ºpunkte
- f√ºr Option 1 und 2 wird jeweils eine passende Funktion aufgerufen
- Option 1 `weatherByLocation()` mit bisherigem Code
- Option 2: `showLocations()` mit `console.log("noch nicht implementiert")`; o.√§.
- Option 3 beendet die App mit `process.exit()`

Mit `console.clear();` Bildschirm l√∂schen. 

`question('weiter mit Enter');` um kurz zu warten.
</Callout>

## `switch` als Alternative zu `if/else if/else`

Jede Verzweigung mit `if` kann im Prinzip durch
ein `switch` ersetzt werden. Dazu kann zun√§chst
ein `switch` mit dem ‚ÄûAuswahlausdruck‚Äú `true`
deklariert werden:

```js
switch(true) {
  // case...usw.
}
```

Nun lassen sich in den `case`-Teilen beliebige
logische bzw. boolesche Ausdr√ºcke verwenden:

```js
import { questionInt } from "readline-sync";

const age = questionInt("Bitte Alter eingeben:");

switch(true) {
  case age > 0 && age < 18:
    console.log("minderj√§hrig");
    break;
  case age >= 18 && age < 67:
    console.log("erwachsen");
    break;
  case age >= 67 && age < 120:
    console.log("im Ruhestand");
    break;
  default:
    console.log("Ung√ºltiges Alter: " + age);
    break;
}
```

Hier wird sozusagen jeder `case`-Ausdruck mit `true`
verglichen, sodass hierdurch beliebige Verzweigungen
(`if/else if/else`) auch mit `switch` 
ausgedr√ºckt werden k√∂nnen.
