import { Callout } from 'nextra/components'

# Übungen

<Callout>
  **Dauer:** 45-60 Minuten \
  (ggf. Besprechung beim nächsten Termin)

  **Ziel:** `if/else` und `switch` anwenden
</Callout>

In diesen Übungen erweitern wir den Trinkgeldrechner
aus den vorherigen Lektionen um Verzweigungen mit
`if/else` und `switch`.

## Aufgabe 1: Service-Bewertung mit Auswahl (Einstieg)

Erweitere den Trinkgeldrechner um eine Funktion `suggestTip`,
die basierend auf einem "Service-Level" einen Prozentsatz vorschlägt:

- **Parameter:** `serviceLevel` (1 = schlecht, 2 = okay, 3 = gut)
- **Rückgabewert:** Vorgeschlagener Prozentsatz (5%, 10%, 15%)

```js
function suggestTip(serviceLevel) {
  if (serviceLevel === 3) {
    return 15;
  } else if (serviceLevel === 2) {
    return 10;
  } else {
    return 5;
  }
}
```

Integriere diese Funktion in den Trinkgeldrechner, sodass
der Benutzer zwischen manuellem Prozentsatz und Service-Bewertung
wählen kann:

```js
import { questionInt } from 'readline-sync';

let choice = questionInt("1 = Prozentsatz eingeben, 2 = Service bewerten: ");

if (choice === 1) {
  // Prozentsatz direkt abfragen
} else {
  // Service-Level abfragen und suggestTip aufrufen
}
```

## Aufgabe 2: Eingabevalidierung mit Fehlermeldung (Einstieg)

Erweitere die Validierungsfunktion, sodass sie nicht nur `true`/`false`
zurückgibt, sondern bei ungültigen Eingaben eine passende Fehlermeldung
ausgibt:

```js
function validateAndReport(bill, percent, persons) {
  if (bill <= 0) {
    console.log("Fehler: Rechnungsbetrag muss größer als 0 sein.");
    return false;
  }
  if (percent < 0 || percent > 100) {
    console.log("Fehler: Prozentsatz muss zwischen 0 und 100 liegen.");
    return false;
  }
  if (persons <= 0) {
    console.log("Fehler: Personenanzahl muss größer als 0 sein.");
    return false;
  }
  return true;
}
```

Verwende diese Funktion im Hauptprogramm und führe die Berechnung
nur aus, wenn die Validierung erfolgreich war.

## Aufgabe 3: Erweiterte Bewertung (Übung)

Ersetze die Funktion `getRating` durch eine Version mit `if/else`,
die mehr Kategorien unterstützt:

| Prozentsatz | Bewertung |
|-------------|-----------|
| 0-4% | "Sehr sparsam" |
| 5-9% | "Sparsam" |
| 10-14% | "Normal" |
| 15-19% | "Großzügig" |
| ab 20% | "Sehr großzügig" |

```js
function getRating(percent) {
  // Mit if/else if/else implementieren
}

// Tests:
console.log(getRating(3));   // "Sehr sparsam"
console.log(getRating(7));   // "Sparsam"
console.log(getRating(12));  // "Normal"
console.log(getRating(17));  // "Großzügig"
console.log(getRating(25));  // "Sehr großzügig"
```

## Aufgabe 4: Bewertung mit switch (Übung)

Implementiere die Funktion `suggestTip` alternativ mit `switch`:

```js
function suggestTip(serviceLevel) {
  switch (serviceLevel) {
    // Fälle hier ergänzen
  }
}
```

<Callout type="info">
**Vergleich:** Wann ist `if/else` besser geeignet, wann `switch`?

- `switch` eignet sich für diskrete Werte (1, 2, 3, ...)
- `if/else` eignet sich für Bereiche (< 10, >= 15, ...)
</Callout>

## Aufgabe 5: Trinkgeldrechner komplett (Vertiefung)

Kombiniere alle Verbesserungen zu einem vollständigen Trinkgeldrechner:

1. Auswahl: manueller Prozentsatz oder Service-Bewertung
2. Eingabevalidierung mit Fehlermeldungen
3. Erweiterte Bewertung (5 Kategorien)
4. Formatierte Ausgabe

**Beispielablauf:**

```
=== Trinkgeldrechner ===
1 = Prozentsatz eingeben
2 = Service bewerten
Auswahl: 2

Service-Level (1=schlecht, 2=okay, 3=gut): 3
Rechnungsbetrag: 85.50
Anzahl Personen: 3

--- Ergebnis ---
Rechnungsbetrag:  85.50
Trinkgeld (15%):  12.83
Gesamtbetrag:     98.33
Pro Person:       32.78
Bewertung:        Großzügig
```

<Callout type="warning">
Aufgaben und Lösungen siehe `04-if-switch` im Repository `exercises`.
</Callout>

## Zusatzaufgabe: Smiley/Sadly in p5js.org

Mit dieser Zusatzaufgabe werden Funktionen
zur Abwechslung in der JavaScript-Bibliothek
[p5js.org](https://p5js.org) eingesetzt. 

Im [p5js-Editor](https://editor.p5js.org) 
lassen sich in einer interaktiven Umgebung
Grafiken und Animationen erstellen.

Im Code werden zwei Funktionen deklariert (`setup` und `draw`). In den beiden Funktionen werden jeweils 
im Funktionsrumpf andere Funktionen aus dem 
Framework p5js aufgerufen (`createCanvas()` mit 
zwei Parametern und `background()` mit einem 
Parameter).

```js	
function setup() {	
  createCanvas(400, 400);	
}
	
function draw() {
  background(220);	
}
```

<Callout type="info">
Hierzu eine kurze Vorführung z. B. mit Kreisen
in p5js. Link auf die Referenz mit Suchfunktion
zum Nachschlagen von Konzepten: 
[p5js Referenz](https://p5js.org/reference/)
</Callout>

## Aufgabe
Bauen Sie in editor.p5js.org einen interaktiven Smiley bzw. Sadly.

Der Smiley soll aus verschiedenen Kreisen (`circle`) 
für den Kopf, die Augen und den lächelnden Mund 
bestehen. Wenn der Mauszeiger in der oberen Hälfte 
der Leinwand (`canvas`) ist, soll der Smiley zu sehen 
sein. Bewegt sich der Mauszeiger in die untere 
Hälfte, dann wird der Smiley zu einem Sadly, d.h. die 
Mundwinkel zeigen nach unten. Die Mausposition kann 
jederzeit mit `mouseX` und `mouseY` abgefragt werden.

Versuchen Sie mindestens den Smiley in p5js zu
bauen:

![Smiley](/images/prog/smiley.png)

**Hinweise zum Vorgehen:** \
Erstellen Sie für die Zeichnung der einzelnen Bestandteile 
des Smileys jeweils passende Funktionen, die Sie dann in
der `draw`-Funktion aufrufen, z. B.

```js
function draw() {
  background(220);
  // die folgenden drei Funktionen sind zu schreiben!
  drawFace();
  drawEyes();
  drawMouth();
}
```

Der Sadly sieht dann so aus und sollte erscheinen,
wenn der Mauszeiger in die untere Hälfte der `canvas`
bewegt wird:

![Sadly](/images/prog/sadly.png)

**Mögliche Zusatzaufgaben:**

Gestalten Sie den Smiley nach eigenen Ideen: 
Pupillen, Augenbrauen, Brille, Hut, Zähne, usw. 
oder bauen Sie mehrere unterschiedliche Smileys ein.

**Hier können Sie gerne kreativ werden und KI-Tools einsetzen!**

&rarr; Durch KI-Tools gelingt die Verwendung von p5js schneller und einfacher.